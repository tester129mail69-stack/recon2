<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}GODRECON Dashboard{% endblock %}</title>
    <style>
        :root {
            --bg: #0d1117;
            --bg2: #161b22;
            --bg3: #21262d;
            --border: #30363d;
            --text: #e6edf3;
            --text-muted: #8b949e;
            --accent: #f85149;
            --accent2: #58a6ff;
            --green: #3fb950;
            --yellow: #d29922;
            --orange: #e3b341;
            --red: #f85149;
            --purple: #bc8cff;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-size: 14px; line-height: 1.5; }
        a { color: var(--accent2); text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* Nav */
        .nav { background: var(--bg2); border-bottom: 1px solid var(--border); padding: 0 24px; display: flex; align-items: center; height: 52px; gap: 8px; }
        .nav-brand { font-size: 18px; font-weight: 700; color: var(--accent); margin-right: 24px; letter-spacing: 1px; }
        .nav-link { color: var(--text-muted); padding: 6px 12px; border-radius: 6px; font-size: 13px; transition: all 0.15s; }
        .nav-link:hover, .nav-link.active { color: var(--text); background: var(--bg3); text-decoration: none; }

        /* Layout */
        .container { max-width: 1280px; margin: 0 auto; padding: 24px; }
        .page-header { margin-bottom: 24px; }
        .page-header h1 { font-size: 24px; font-weight: 600; }
        .page-header p { color: var(--text-muted); margin-top: 4px; }

        /* Cards */
        .card { background: var(--bg2); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin-bottom: 16px; }
        .card-title { font-size: 14px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px; }

        /* Stats grid */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 24px; }
        .stat-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 8px; padding: 20px; }
        .stat-value { font-size: 32px; font-weight: 700; color: var(--text); }
        .stat-label { font-size: 12px; color: var(--text-muted); margin-top: 4px; text-transform: uppercase; letter-spacing: 0.5px; }

        /* Table */
        .table-wrap { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 10px 12px; font-size: 12px; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid var(--border); }
        td { padding: 10px 12px; border-bottom: 1px solid var(--border); vertical-align: middle; }
        tr:last-child td { border-bottom: none; }
        tr:hover td { background: var(--bg3); }

        /* Severity badges */
        .badge { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
        .badge-critical { background: rgba(248,81,73,0.15); color: #f85149; border: 1px solid rgba(248,81,73,0.3); }
        .badge-high { background: rgba(255,140,0,0.15); color: #e3b341; border: 1px solid rgba(227,179,65,0.3); }
        .badge-medium { background: rgba(210,153,34,0.15); color: #d29922; border: 1px solid rgba(210,153,34,0.3); }
        .badge-low { background: rgba(88,166,255,0.15); color: #58a6ff; border: 1px solid rgba(88,166,255,0.3); }
        .badge-info { background: rgba(139,148,158,0.15); color: #8b949e; border: 1px solid rgba(139,148,158,0.3); }

        /* Status badges */
        .status-completed { color: var(--green); }
        .status-running { color: var(--accent2); }
        .status-pending { color: var(--text-muted); }
        .status-failed { color: var(--red); }

        /* Buttons */
        .btn { display: inline-flex; align-items: center; gap: 6px; padding: 6px 14px; border-radius: 6px; font-size: 13px; font-weight: 500; cursor: pointer; border: 1px solid var(--border); background: var(--bg3); color: var(--text); transition: all 0.15s; }
        .btn:hover { background: var(--border); text-decoration: none; }
        .btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
        .btn-primary:hover { background: #da3633; border-color: #da3633; }

        /* Filters */
        .filters { display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap; }
        .filter-input { background: var(--bg3); border: 1px solid var(--border); border-radius: 6px; color: var(--text); padding: 6px 12px; font-size: 13px; }
        .filter-input:focus { outline: none; border-color: var(--accent2); }

        /* Alert message */
        .alert { padding: 12px 16px; border-radius: 6px; margin-bottom: 16px; }
        .alert-success { background: rgba(63,185,80,0.1); border: 1px solid rgba(63,185,80,0.3); color: var(--green); }

        /* Code */
        pre, code { font-family: 'Consolas', 'Monaco', monospace; font-size: 12px; }
        pre { background: var(--bg3); border: 1px solid var(--border); border-radius: 6px; padding: 12px; overflow-x: auto; }

        /* Responsive */
        @media (max-width: 768px) {
            .nav { overflow-x: auto; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <span class="nav-brand">ðŸ”± GODRECON</span>
        <a href="/dashboard/" class="nav-link {% if request.url.path == '/dashboard/' %}active{% endif %}">Overview</a>
        <a href="/dashboard/scans" class="nav-link {% if '/dashboard/scans' in request.url.path %}active{% endif %}">Scans</a>
        <a href="/dashboard/findings" class="nav-link {% if '/dashboard/findings' in request.url.path %}active{% endif %}">Findings</a>
        <a href="/dashboard/surface" class="nav-link {% if '/dashboard/surface' in request.url.path %}active{% endif %}">Attack Surface</a>
        <a href="/dashboard/settings" class="nav-link {% if '/dashboard/settings' in request.url.path %}active{% endif %}">Settings</a>
        <span style="margin-left: auto; color: var(--text-muted); font-size: 12px;">API: <a href="/docs" class="nav-link" style="display:inline;">Swagger</a></span>
    </nav>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    <script>
        // Auto-refresh logic for pages with active scans
        (function() {
            const AUTO_REFRESH_INTERVAL = 5000;
            const hasActive = document.querySelector('.status-running, .status-pending');
            if (hasActive) {
                setTimeout(() => location.reload(), AUTO_REFRESH_INTERVAL);
            }
        })();

        // Client-side table filtering
        function filterTable(inputId, tableId) {
            const input = document.getElementById(inputId);
            const table = document.getElementById(tableId);
            if (!input || !table) return;
            input.addEventListener('input', function() {
                const filter = this.value.toLowerCase();
                table.querySelectorAll('tbody tr').forEach(row => {
                    row.style.display = row.textContent.toLowerCase().includes(filter) ? '' : 'none';
                });
            });
        }
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
